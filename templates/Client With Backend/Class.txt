<?php 
// --------------------------------------------------------------------
// CLASS OBJECT/TEST CLASS FOR TABLE [prmTablename]
// Generated by Classmaker.php 
// Created by Adhadi Mohd
// 2011 (C) All Rights Reserved
// --------------------------------------------------------------------

require_once "config.php";
/* Begin Class */

class c[prmTablename]
{
 	[varFields]

	[classParam]

	function insert()
	{
		$mysqli = new mysqli( DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
		/* check connection */
	
		if (mysqli_connect_errno()) {
			printf("Connect failed: %s\n", mysqli_connect_error());
			exit();
		}
		
		$query= "INSERT INTO [prmTablename] ([insertfields]) VALUES ([paramfields])";
		
		//echo $query;
		
		if ($mysqli->query($query)) {
			
			$this->id = $mysqli->insert_id;
			
			return true;
		} else { return false;}
	
		/* close connection */
		$mysqli->close();
	
	}
	
	
function delete($id)
	{
		$mysqli = new mysqli( DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
		/* check connection */
	
		if (mysqli_connect_errno()) {
			printf("Connect failed: %s\n", mysqli_connect_error());
			exit();
		}
		
		$query= "DELETE FROM [prmTablename] WHERE id = $id";
		
		//echo $query;
		
		if ($mysqli->query($query)) {
			
		
			return true;
	
		} else { return false;}
	
		/* close connection */
		$mysqli->close();
	
	}
	
	
function update($id)
	{
		$mysqli = new mysqli( DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
		/* check connection */
	
		if (mysqli_connect_errno()) {
			printf("Connect failed: %s\n", mysqli_connect_error());
			exit();
		}
		
		$query= "UPDATE [prmTablename] SET [updateParam] WHERE id = $id";
		
		//echo $query;
		
		if ($mysqli->query($query)) {
			
		
			return true;
	
		} else { return false;}
	
		/* close connection */
		$mysqli->close();
	
	}





function load($id)
{
	$mysqli = new mysqli( DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
		/* check connection */
	
		if (mysqli_connect_errno()) {
			printf("Connect failed: %s\n", mysqli_connect_error());
			exit();
		}
		
		$query= "SELECT * FROM [prmTablename] where id=$id";
		//echo $query;
		$result = $mysqli->query($query);
		$row = $result->fetch_assoc();
		//echo $row['id'];
		
		[varLoadAssign]
	
	}}

/* End Class */





// ---------------------------------------------------------------
//  CODE FOR TESTING
// ---------------------------------------------------------------
class c[prmTablename]Test

{
	
	function testInsert([insertfields2]) 
	
	{
		$o[prmTablename]= new c[prmTablename]();
	
	[cConsumerParam]
	
	$o[prmTablename]->insert();
	return $o[prmTablename]->get_id();
	}
	
	function testUpdate($id,[insertfields2]) 
	
	{
		$o[prmTablename]= new c[prmTablename]();
	
	[cConsumerParam]
	
	
	$ret= $o[prmTablename]->update($id);
	
	if ($ret>0)
		{
		return $ret;
		} else {
		return false;
		}
	}
	
	
	
	function getrandstring()
	{
		$n = rand(10e16, 10e20);
		return base_convert($n, 10, 36);
	}
	
	
	// --------------------------------------------------------------
	function testLoad($id)
	{
	
	$o[prmTablename]= new c[prmTablename]();
	$o[prmTablename]->load($id);
	
	[echoParam]
	
	}
	
	
	
	// --------------------------------------------------------------
	function testDelete($id)
	{
	
	$o[prmTablename]= new c[prmTablename]();
	$ret = $o[prmTablename]->delete($id);
	
	if ($ret)
	{ echo "Delete Success"; }
	else
	{ echo "Delete Failed"; }
	
	}
	
	// ------------------ Begin Testing ------------------------------
	function BeginTest()
	{
	
	echo "<h2>Begin Test</h2>";
	[testParam]
	
	
	$retVal = $this->testInsert([insertfields2]);
	
	echo "<h4>Test Insert</h4>";
	if ($retVal>0)
	{ 
	echo "Test Insert [SUCCESS] with ID Value $retVal <br>";
	} else
	echo "Test Insert [Failed]  <br>";
	
	echo "<h4>Test Load</h4>";
	$this->testLoad($retVal);
	
	
	echo "<h4>Test Update</h4>";
	[testParam]
	$this->testUpdate($retVal,[insertfields2] );
	
	echo "<h4>Test Load After Update</h4>";
	$this->testLoad($retVal);
	
	echo "<h4>Test Delete</h4>";
	$this->testDelete($retVal);
	}
}




?>